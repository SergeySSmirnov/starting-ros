# Базовые понятия ROS

## Основные термины

### Мастер \(Master\), Мастер-Нода 

Мастер выполняет роль сервера имен для возможности подключения между собой различных нод. Команда `roscore` запускает сервер мастера, и после этого к нему могут подклюиться и зарегистрироваться ноды ROS. Связь между нодами \(обмен сообщениями\), невозможна без запущенного мастера.

При запуске ROS `roscore`, мастер будет запущен по адрессу URI, установленным в переменной окружения `ROS_MASTER_URI`. По умолчанию адрес использует IP-адрес локального ПК и номер порта 11311

### Нода \(Node\)

Понятие ноды, относиться к наименьшей "рабочей" удиницы используемой в ROS. Можно провести аналогию с одной исполняемой программой. ROS рекомендует создать одину ноду для каждой задачи, что позволить легче повторно использовать ее.

При запуске нода регистрирует информацию о себе на мастере \(название ноды, типы обрабатываемых сообщений\). Зарегистрированная нода может взаимоействовать с другими нодами \(получать и отправлять запросы\). Важно отметить что обмен сообщениями между нодами работает без участия мастера \(соединение между нодами происходит на прямую\). Мастер обеспечивает только удиное пространство имен для решения вопроса куда подключиться к конкретной ноде. Адрес запуска ноды, береться из переменной окружения `ROS_HOSTNAME`, которая должна быть определенна до запуска. Порт устанавливается на произвольное уникальное значение.

### Пакет \(Package\)

Пакет является основной единицей ROS. Любое приложение ROS оформляеться в пакет, в котором опредляються: конфигурация пакета, ноды необходимые для работа пакета, зависимости от других пакетов ROS.

Работа с пакетами ROS очень похожа на работу с пакетами linux. Пакет ROS можно поставить готовым из репозитория пакетов, так и скачить и скомпилировать из исходных кодов.

Поиск доступных пакетов ROS возможен на странице [http://wiki.ros.org/](http://wiki.ros.org/)

### Сообщение \(Message\)

Ноды отправляют и принимают данные между собой, согласно описанного формата. Эти данные называют Сообщения, а описание Типом Сообщения.

Сообщения могут быть простых типов \(integer, float, boolean\) так и могут состоять из вложенных структур, содержать другие сообщения и массивы сообщений\).

Например для сообщение с координатами обьекта \(XYZ\) есть существующий тип сообщения `geometry_msgs/Point.msg` который описывается:

```c
float64 x
float64 y
float64 z
```

### Топик \(Topic\), модель Издатель и Подписчик

Топик \(Topic\), это один из видов обмена сообщениями, который буквально похож на тему в разговоре. Нода издателя \(publisher\) сначала регистрирует свою тему с помощью мастера, а затем начинает публикацию сообщений в эту тему \(топик\). Узлы подписчиков, которые хотят получать информацию из этой темы \(типика\) при помощи мастера получают адресс этой темы и далее получают сообщения из этого топика.

#### Издатель \(Publisher\)

Издателем называется процесс, который рассылает сообщения в рамках созданного топика для других нод. Одна нода может содержать нессколько издателей, публикующих данные в разные топики.

#### Подписчик \(Subscriber\)

Подписчиком называеться процесс, который получает сообщения соответвующие из определенного топика. Подписчик регистрируется на мастере, указывая какие топики необхожимо получать. После этого издатель начинает отправлять сообщения подписчику. Связь с топиком для подписчика является асинхронной \(издатель публикует сообщения в не зависимости от статуса прдписчиков\).

Этот тип взаимодействия удобно применять для работы с датчиками, которые непрерывно передают полученные значения.

### Сервис \(Service\), Сервис Клиент и Сервис Сервер

Сервис представляет собой синхронную двунаправленную связь между  клиентом, который запрашивает данные и сервером который отвечает на запросы.

#### Сервис Сервер \(Service Server\)

«Сервис Сервер» - это узел коммуникации,  который получает запрос и передает обратно ответ. Запрос и ответ оформляются в виде сообщений.

#### Сервис Клиент \(Service Client\)

Сервис Клиент - это узел коммуникации, который создает запрос на Сервис Сервере и получает ответ после выполнения запроса. Запрос и ответ оформляются в виде сообщений.

Данный тип взаимодействия применяеться для удаленного выполнения различных операций в рамках разных нод.

### Действие \(Action\), Action Goal, Action Result, Action Feedback

Действие представляет собой другой способ связи, используемый для асинхронной двунаправленной связи. Действие используется там, где требуется больше времени для ответа после получения запроса, и промежуточные ответы требуются до тех пор, пока результат не будет достигнут. Структура протокола Действия \(Action\) похожа на структуру Сервис \(Service\), однако в протокол внесены дополнительные параметры: задача \(Action Goal\), обратная связь \(Action Feedback\), результат \(Action Result\).

###
